<!DOCTYPE html>
<html lang="{{locale}}" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="color-scheme" content="light dark">
  <meta name="supported-color-schemes" content="light dark">
  <title>{{translations.subject}}</title>
  <style type="text/css">
    /* Modern Email Design System CSS */
    .email-body {
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 14px;
      line-height: 1.5;
      color: #2c3e50;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }

    .preheader {
      display: none;
      font-size: 1px;
      color: #fefefe;
      line-height: 1px;
      max-height: 0px;
      max-width: 0px;
      opacity: 0;
      overflow: hidden;
    }

    .skip-link {
      position: absolute;
      left: -9999px;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }

    .skip-link:focus {
      position: static;
      left: auto;
      width: auto;
      height: auto;
      overflow: visible;
      background: #2c3e50;
      color: white;
      padding: 8px 16px;
      text-decoration: none;
      border-radius: 4px;
    }

    .email-wrapper {
      width: 100%;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
      border-collapse: collapse;
    }

    .email-wrapper-cell {
      padding: 20px;
      vertical-align: top;
    }

    .email-container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      border-collapse: collapse;
    }

    .email-header {
      background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
      color: white;
      padding: 32px;
      text-align: center;
      border-radius: 8px 8px 0 0;
    }

    .email-content {
      padding: 32px;
      background-color: #ffffff;
    }

    .email-footer {
      background-color: #f8f9fa;
      padding: 24px 32px;
      text-align: center;
      border-radius: 0 0 8px 8px;
      border-top: 1px solid #ecf0f1;
    }

    .card-section {
      margin: 16px 0;
      border-radius: 8px;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Responsive styles */
    @media only screen and (max-width: 480px) {
      .email-wrapper-cell {
        padding: 10px !important;
      }

      .email-content {
        padding: 20px !important;
      }

      .email-header {
        padding: 20px !important;
      }

      .email-footer {
        padding: 16px 20px !important;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      .email-body {
        background-color: #121212 !important;
        color: #ffffff !important;
      }

      .email-container {
        background-color: #1e1e1e !important;
      }

      .email-content {
        background-color: #1e1e1e !important;
      }

      .card-section {
        background-color: #2d2d2d !important;
      }
    }
  </style>
</head>
<body class="email-body">
  <table style="width: 100%; max-width:600px">
    <tbody>
    <tr>
      <td>
        <!-- Preheader text for email preview -->
        <div class="preheader" style="display: none; font-size: 1px; color: #fefefe; line-height: 1px; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;" aria-hidden="true">
          {{translations.subject}}
        </div>

        {{> email-header companyName=(companyName locale) tagline=translations.tagline}}

        <!-- Status Update Header -->
        <div style="text-align: center; margin-bottom: 32px;">
          <div style="
            display: inline-block;
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            border-radius: 50%;
            margin-bottom: 16px;
            position: relative;
            ">
            <div style="
              color: white;
              font-size: 24px;
              font-weight: bold;
              margin-top: 10px;
            ">ðŸšš</div>
          </div>
          <h2 style="
            color: #2c3e50;
            margin: 32px 0 8px 0;
            font-size: 18px;
            font-weight: 600;
            ">{{translations.title}}</h2>
        </div>

        <p style="
          font-size: 14px;
          color: #2c3e50;
          margin-bottom: 16px;
        ">{{translations.greeting}} {{data.customerName}},</p>

        <p style="
          color: #7f8c8d;
          margin-bottom: 24px;
          font-size: 14px;
        ">{{translations.intro}}</p>

        <!-- Order Overview -->
        <div style="
          background-color: #ffffff;
          padding: 24px;
          margin: 16px 0;
          border-radius: 8px;
          border-left: 4px solid #3498db;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        ">
          <h3 style="
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 16px;
            font-weight: 600;
          ">{{translations.orderOverview}}</h3>

          <table style="width: 100%; border-collapse: collapse;">
            <tr>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #7f8c8d;
                width: 40%;
              ">{{translations.orderNumber}}:</td>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #2c3e50;
                font-weight: 600;
              ">#{{data.orderNumber}}</td>
            </tr>
            <tr>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #7f8c8d;
              ">{{translations.orderDate}}:</td>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #2c3e50;
              ">{{formatDate data.orderDate locale}}</td>
            </tr>
            <tr>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #7f8c8d;
              ">{{translations.orderTotal}}:</td>
              <td style="
                padding: 4px 0;
                font-size: 16px;
                color: #2c3e50;
                font-weight: 600;
              ">{{formatCurrency data.total locale}}</td>
            </tr>
            <tr>
              <td>{{translations.orderStatus}}:</td>
              <td>
                <span class="status-badge status-{{data.status}}">
                  {{getStatusText data.status locale}}
                </span>
              </td>
            </tr>
            {{#if data.paymentStatus}}
            <tr>
              <td>{{translations.paymentStatus}}:</td>
              <td>
                <span class="status-badge payment-{{data.paymentStatus}}">
                  {{getPaymentStatusText data.paymentStatus locale}}
                </span>
              </td>
            </tr>
            {{/if}}
            {{#if data.trackingNumber}}
            <tr>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #7f8c8d;
              ">{{translations.trackingNumber}}:</td>
              <td style="
                padding: 4px 0;
                font-size: 14px;
                color: #27ae60;
                font-weight: 600;
                font-family: monospace;
              ">{{data.trackingNumber}}</td>
            </tr>
            <tr>
              <td style="
                padding: 8px 0;
                font-weight: 600;
                color: #7f8c8d;
              ">{{translations.shippedDate}}:</td>
              <td style="
                padding: 8px 0;
                color: #2c3e50;
              ">{{formatDate data.shippedDate locale}}</td>
            </tr>
            <tr>
              <td style="
                padding: 8px 0;
                font-weight: 600;
                color: #7f8c8d;
              ">{{translations.estimatedDelivery}}:</td>
              <td style="
                padding: 8px 0;
                color: #2c3e50;
              ">{{formatDate data.estimatedDelivery locale}}</td>
            </tr>
            {{/if}}
          </table>

          <!-- Tracking Information (if available) -->
          {{#if data.shippingAddress}}
          <div style="margin: 32px 0;">
            {{> address-card
            title=translations.shippingAddress
            fullName=data.shippingAddress.fullName
            phone=data.shippingAddress.phone
            addressLine1=data.shippingAddress.addressLine1
            addressLine2=data.shippingAddress.addressLine2
            city=data.shippingAddress.city
            state=data.shippingAddress.state
            postalCode=data.shippingAddress.postalCode
            country=data.shippingAddress.country}}
          </div>
          {{/if}}

          <!-- Track Order Button -->
          <div style="
            text-align: center;
            margin-top: 32px;
          ">
            <a href="{{concat frontendUrl '/' locale '/orders/' data.orderId}}" style="
              display: inline-block;
              background-color: #3498db;
              color: white;
              text-decoration: none;
              padding: 12px 24px;
              border-radius: 6px;
              font-size: 14px;
              font-weight: 600;
              text-align: center;
              min-width: 120px;
            ">{{translations.viewOrderDetails}}</a>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <p style="font-size: 16px; margin: 20px 0;">{{translations.contactUs}}</p>
      </td>
    </tr>
    <tr>
      <td>
        {{> email-footer
            currentYear=currentYear
            companyName=(companyName locale)
            supportEmail=(supportEmail)
            websiteUrl=(frontendUrl)
            disclaimer=translations.disclaimer}}
      </td>
    </tr>
    </tbody>
  </table>
</body>
</html>